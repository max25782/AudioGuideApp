const fs = require('fs');

// –ß–∏—Ç–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ç–æ—á–µ–∫
const pointsData = require('../src/data/processed/points-with-audio.json');

/**
 * –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –∞—É–¥–∏–æ–≥–∏–¥–∞ –¥–ª—è —Ç–æ—á–∫–∏ –∏–Ω—Ç–µ—Ä–µ—Å–∞
 */
function generateAudioScript(point) {
  const categoryNames = {
    historical: '–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–µ –º–µ—Å—Ç–æ',
    religious: '—Ä–µ–ª–∏–≥–∏–æ–∑–Ω—ã–π –æ–±—ä–µ–∫—Ç',
    children: '–¥–µ—Ç—Å–∫–æ–µ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–µ',
    nature: '–ø—Ä–∏—Ä–æ–¥–Ω–∞—è –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å',
    culture: '–∫—É–ª—å—Ç—É—Ä–Ω—ã–π –æ–±—ä–µ–∫—Ç',
    tourism: '—Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ –º–µ—Å—Ç–æ',
    architecture: '–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–∞–º—è—Ç–Ω–∏–∫',
    amenity: '—É–¥–æ–±—Å—Ç–≤–æ',
    leisure: '–º–µ—Å—Ç–æ –¥–ª—è –¥–æ—Å—É–≥–∞'
  };

  const categoryName = categoryNames[point.category] || point.category;

  return `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ ${point.name}!

–≠—Ç–æ ${categoryName}, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã–π –≤ –ò–∑—Ä–∞–∏–ª–µ.

${point.description}

–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –æ–± –∏—Å—Ç–æ—Ä–∏–∏ —ç—Ç–æ–≥–æ –º–µ—Å—Ç–∞, –µ–≥–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —Ñ–∞–∫—Ç–∞—Ö.

–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–Ω–∏–º–∞–Ω–∏–µ!`;
}

/**
 * –°–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª—ã —Å —Ç–µ–∫—Å—Ç–∞–º–∏ –¥–ª—è –∞—É–¥–∏–æ–≥–∏–¥–æ–≤
 */
function createAudioScripts() {
  console.log('üé§ –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤ –¥–ª—è –∞—É–¥–∏–æ–≥–∏–¥–æ–≤...\n');

  // –°–æ–∑–¥–∞–µ–º –ø–∞–ø–∫—É –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤
  const scriptsDir = './audio-scripts';
  if (!fs.existsSync(scriptsDir)) {
    fs.mkdirSync(scriptsDir);
  }

  // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç—ã –¥–ª—è –ø–µ—Ä–≤—ã—Ö 10 —Ç–æ—á–µ–∫
  const samplePoints = pointsData.slice(0, 10);
  
  samplePoints.forEach((point, index) => {
    const script = generateAudioScript(point);
    const filename = `${scriptsDir}/${point.id}_script.txt`;
    
    fs.writeFileSync(filename, script, 'utf8');
    
    console.log(`‚úÖ ${point.id}: ${point.name}`);
    console.log(`   –§–∞–π–ª: ${filename}`);
    console.log(`   –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ~2-3 –º–∏–Ω—É—Ç—ã\n`);
  });

  console.log(`üìù –°–æ–∑–¥–∞–Ω–æ ${samplePoints.length} —Ç–µ–∫—Å—Ç–æ–≤ –¥–ª—è –∞—É–¥–∏–æ–≥–∏–¥–æ–≤`);
  console.log(`üìÅ –ü–∞–ø–∫–∞: ${scriptsDir}`);
  console.log('\nüéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:');
  console.log('1. –ó–∞–ø–∏—à–∏—Ç–µ –∞—É–¥–∏–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ–∫—Å—Ç–∞');
  console.log('2. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ MP3 (128-256 kbps)');
  console.log('3. –ò–º–µ–Ω—É–π—Ç–µ —Ñ–∞–π–ª—ã: point_1.mp3, point_2.mp3, –∏ —Ç.–¥.');
  console.log('4. –ü–æ–º–µ—Å—Ç–∏—Ç–µ –≤ –ø–∞–ø–∫—É assets/audio/');
}

/**
 * –°–æ–∑–¥–∞–µ—Ç —à–∞–±–ª–æ–Ω –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –∑–∞–ø–∏—Å–∏
 */
function createProfessionalTemplate() {
  console.log('\nüéôÔ∏è –®–∞–±–ª–æ–Ω –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –∑–∞–ø–∏—Å–∏:\n');

  const template = `# –®–∞–±–ª–æ–Ω –∞—É–¥–∏–æ–≥–∏–¥–∞

## –û–±—â–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- –§–æ—Ä–º–∞—Ç: MP3
- –ë–∏—Ç—Ä–µ–π—Ç: 128-256 kbps
- –ß–∞—Å—Ç–æ—Ç–∞: 44.1 kHz
- –ö–∞–Ω–∞–ª—ã: –ú–æ–Ω–æ –∏–ª–∏ –°—Ç–µ—Ä–µ–æ
- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 1-3 –º–∏–Ω—É—Ç—ã

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–∂–¥–æ–≥–æ –∞—É–¥–∏–æ–≥–∏–¥–∞:

### 1. –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ (5-10 —Å–µ–∫)
"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ [–Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Å—Ç–∞]!"

### 2. –ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Å—Ç–∞ (5 —Å–µ–∫)
"–≠—Ç–æ [–Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–∞ –∏–≤—Ä–∏—Ç–µ] - [–Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º]"

### 3. –ö–∞—Ç–µ–≥–æ—Ä–∏—è (5 —Å–µ–∫)
"–≠—Ç–æ [–∫–∞—Ç–µ–≥–æ—Ä–∏—è] –≤ –ò–∑—Ä–∞–∏–ª–µ"

### 4. –û–ø–∏—Å–∞–Ω–∏–µ (30-60 —Å–µ–∫)
[–û–ø–∏—Å–∞–Ω–∏–µ –º–µ—Å—Ç–∞ –∏–∑ –¥–∞–Ω–Ω—ã—Ö]

### 5. –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ñ–∞–∫—Ç—ã (30-60 —Å–µ–∫)
[–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è]

### 6. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (15-30 —Å–µ–∫)
"–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ [—á—Ç–æ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å]"

### 7. –ü—Ä–æ—â–∞–Ω–∏–µ (5-10 —Å–µ–∫)
"–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–Ω–∏–º–∞–Ω–∏–µ! –ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –ø–æ—Å–µ—â–µ–Ω–∏–µ–º!"

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∑–∞–ø–∏—Å–∏:
- –ì–æ–≤–æ—Ä–∏—Ç–µ —á–µ—Ç–∫–æ –∏ –º–µ–¥–ª–µ–Ω–Ω–æ
- –î–µ–ª–∞–π—Ç–µ –ø–∞—É–∑—ã –º–µ–∂–¥—É –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Ç–æ–Ω–∞—Ü–∏—é –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è –≤–∞–∂–Ω–æ–≥–æ
- –ó–∞–ø–∏—Å—ã–≤–∞–π—Ç–µ –≤ —Ç–∏—Ö–æ–º –ø–æ–º–µ—â–µ–Ω–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –º–∏–∫—Ä–æ—Ñ–æ–Ω
`;

  fs.writeFileSync('./audio-scripts/recording-template.md', template, 'utf8');
  console.log('‚úÖ –°–æ–∑–¥–∞–Ω —à–∞–±–ª–æ–Ω: audio-scripts/recording-template.md');
}

/**
 * –°–æ–∑–¥–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–ª—è TTS —Å–µ—Ä–≤–∏—Å–æ–≤
 */
function createTTSScript() {
  console.log('\nü§ñ –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è TTS —Å–µ—Ä–≤–∏—Å–æ–≤...\n');

  const ttsScripts = pointsData.slice(0, 5).map(point => {
    const shortDescription = point.description.length > 200 
      ? point.description.substring(0, 200) + '...'
      : point.description;

    return {
      id: point.id,
      name: point.name,
      text: `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ ${point.name}. ${shortDescription}`,
      language: 'ru-RU',
      voice: 'female',
      duration: '~1-2 minutes'
    };
  });

  const ttsFile = './audio-scripts/tts-scripts.json';
  fs.writeFileSync(ttsFile, JSON.stringify(ttsScripts, null, 2), 'utf8');

  console.log('‚úÖ –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª –¥–ª—è TTS: audio-scripts/tts-scripts.json');
  console.log('\nüåê –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ TTS —Å–µ—Ä–≤–∏—Å—ã:');
  console.log('- Google Text-to-Speech');
  console.log('- Amazon Polly');
  console.log('- Microsoft Azure Speech');
  console.log('- ElevenLabs (–≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ)');
}

// –ó–∞–ø—É—Å–∫
createAudioScripts();
createProfessionalTemplate();
createTTSScript(); 